<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–í—Ö–æ–¥</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
    font-family: system-ui;
    background: linear-gradient(120deg,#7f00ff,#00c6ff,#ff0080);
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    height:100vh;
}
.box{
    background:rgba(0,0,0,.4);
    padding:20px;
    border-radius:12px;
    width:280px;
}
input,button{
    width:100%;
    padding:10px;
    margin-top:10px;
}
button{
    cursor:pointer;
}
</style>
</head>
<body>

<div class="box">
    <h3>–í—Ö–æ–¥ –ø–æ –Ω–æ–º–µ—Ä—É üì±</h3>
    <input id="phone" placeholder="–ù–æ–º–µ—Ä">
    <input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="login()">–í–æ–π—Ç–∏</button>
</div>

<script>
async function login(){
    const phone = document.getElementById("phone").value.trim();
    const password = document.getElementById("password").value.trim();

    if (!phone || !password) {
        alert("–ó–∞–ø–æ–ª–Ω–∏ –Ω–æ–º–µ—Ä –∏ –ø–∞—Ä–æ–ª—å");
        return;
    }

    try {
        const res = await fetch("/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ phone, password })
        });

        // üî• –í–ê–ñ–ù–û: —á–∏—Ç–∞–µ–º –¢–ï–ö–°–¢, –∞ –Ω–µ JSON
        const text = await res.text();
        console.log("LOGIN RESPONSE:", text);

        if (res.ok) {
            localStorage.setItem("phone", phone);
            window.location.href = "/private";
        } else {
            alert("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞");
        }

    } catch (err) {
        console.error("LOGIN ERROR:", err);
        alert("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º");
    }
}
</script>

</body>
</html>

