<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Simple Messenger</title>
<link rel="icon" href="/favicon.ico">
<style>
body {
  background:#020617;
  color:white;
  font-family:sans-serif;
}
#messages {
  height:85vh;
  overflow-y:auto;
  border:1px solid #334155;
  padding:10px;
}
input, button {
  padding:8px;
  background:#020617;
  color:white;
  border:1px solid #334155;
}
</style>
</head>
<body>

<h3>Публичный чат</h3>
<div id="messages"></div>
<input id="msg" placeholder="Сообщение">
<button onclick="send()">Отправить</button>

<script>
console.log("JS started ✅");

const protocol = location.protocol === "https:" ? "wss" : "ws";
const ws = new WebSocket(`${protocol}://${location.host}/ws`);

ws.onopen = () => console.log("WS connected ✅");

ws.onmessage = (e) => {
    console.log("MSG:", e.data);
    const d = document.createElement("div");
    d.textContent = e.data;
    document.getElementById("messages").appendChild(d);
};

function send() {
    const input = document.getElementById("msg");
    if (!input.value) return;
    ws.send(input.value);
    input.value = "";
}
</script>

</body>
</html>
